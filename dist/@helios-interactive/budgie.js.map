{"version":3,"sources":["budgie.concat.js"],"names":["styleBlock","document","createElement","innerHTML","head","appendChild","imageExtensions","videoExtensions","BudgieDom","Object","create","setupBudgieContainer","budgie","parentContainer","classList","add","budgieId","budgieFlexContainer","setupBudgieCSS","eleWidth","parseInt","window","getComputedStyle","budgieContainer","width","numOfSheets","sheetIndex","styleSheets","length","cssRules","numberAcross","options","numberHigh","numberWide","height","insertRule","i","direction","setupBudgieScrollProperties","scrollProperty","measureElementWidthAndHeight","budgieElementMeasure","isHorizontal","addEventListener","onScroll","setupBudgieMouseDrag","mouseDown","event","onMouseMove","insertBudgieElements","items","forEach","item","id","hasOddEnding","numberLeftWithOddEnding","createBudgieFillerElement","createBudgieElement","fitsInContainer","blankEle","filler","itemIndex","element","innerDiv","convertItemToElement","outerHTML","Error","extension","match","substr","includes","src","selector","measure","elementComputedStyle","querySelector","parseFloat","Budgie","assign","constructor","defaultOptions","Math","floor","random","previousItems","self","pop","a","Array","prototype","apply","arguments","popItem","push","pushItem","shift","shiftItem","unshift","unshiftItem","splice","updateAllElements","budgieSetup","autoStart","budgieAnimate","elementsOnScreen","budgieElementMeasurement","undefined","scrollContainerSize","isVertical","getElementsByClassName","ceil","currentFiller","removedIndexes","oldArray","newArray","rawArray","map","oldItem","index","some","newItem","filter","addedIndexes","slice","indexesToRemove","indexesToAdd","removeLastItem","addItemAtIndex","realElements","from","querySelectorAll","className","_className","RegExp","remove","dupedElements","parentNode","removeChild","fillerElements","infiniteScroll","prependStartingItems","appendEndingItems","insertAdjacentElement","clearMeasurements","addLastItem","updateBeginningAndEndingItems","updateExistingItems","elementCount","reverse","ele","cloneNode","elementsToDupe","newElement","eleIndex","elements","insertBefore","nextSibling","method","updateListStart","updateListEnding","numberAtTop","topOfDupedElements","lastRowOfRealElements","firstRealElement","numberOff","redraw","operator","lastElements","firstElements","lastElement","firstElement","scrollDirection","scrollSizeMeasurement","budgieElement","movementX","movementY","console","log","autoScroll","fps","currentScroll","budgieContainerMeasurements","viewMeasure","scrollSpeed","secondsOnPage","stopAnimate","parentElement","interval","setInterval","inverted","clearInterval","global"],"mappings":"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","file":"budgie.js","sourcesContent":["'use strict';\n\nlet styleBlock = document.createElement('style');\n\nstyleBlock.innerHTML = `\n.budgie-container {\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: center; }\n\n.budgie-item :first-child {\n  max-height: 100%;\n  max-width: 100%; }\n\n.budgie-container-parent {\n  overflow: -moz-scrollbars-none; }\n  .budgie-container-parent::-webkit-scrollbar {\n    display: none; }\n`;\n\ndocument.head.appendChild(styleBlock);;'use strict';\n\nconst imageExtensions = ['jpg', 'gif', 'png', 'bmp', 'jpeg'];\nconst videoExtensions = ['mp4','ogg', 'webm'];\n/**\n * BudgieDomSetup\n * This class handles tasks that involve interacting with the DOM at setup\n */\nconst BudgieDom = Object.create({\n  /**\n   * Creates the container inside the passed in element that allows for scrolling\n   * @param budgie\n   * @returns {Element} returns the budgie container\n   */\n  setupBudgieContainer : (budgie) => {\n    budgie.parentContainer.classList.add(`budgie-container-parent`);\n    budgie.parentContainer.classList.add(`budgie-container-parent-${budgie.budgieId}`);\n\n    let budgieFlexContainer = document.createElement('div');\n    budgieFlexContainer.classList.add('budgie-container');\n    budgieFlexContainer.classList.add(`budgie-container-${budgie.budgieId}`);\n    budgie.parentContainer.appendChild(budgieFlexContainer);\n\n    return budgieFlexContainer;\n  },\n\n  /**\n   * Create CSS classes for budgie items\n   * @param budgie\n   */\n  setupBudgieCSS : (budgie) => {\n    // Width of budgie container\n    const eleWidth = parseInt(window.getComputedStyle(budgie.budgieContainer).width);\n\n    let numOfSheets = 0;\n    // select last sheet, which is the one we append. Needed for CORS compliance\n    let sheetIndex = document.styleSheets.length - 1;\n\n    // If there are already cssRules declared, then set the correct number of sheets to allow for addition\n    if(document.styleSheets[sheetIndex].cssRules) {\n      numOfSheets = document.styleSheets[sheetIndex].cssRules.length;\n    }\n\n    // Take the larger of the two as the number across\n    const numberAcross = budgie.options.numberHigh >= budgie.options.numberWide ?\n      budgie.options.numberHigh : budgie.options.numberWide;\n\n    // Width in %\n    const width = ((eleWidth / budgie.options.numberWide / eleWidth) * 100);\n    // Height in %\n    const height = (100 / budgie.options.numberHigh);\n\n    // Set the width and height of a single budgie element\n    document.styleSheets[sheetIndex].insertRule(\n      `.budgie-item-${budgie.budgieId}{width: ${width}%; height: ${height}%;}`, numOfSheets\n    );\n\n    // Create CSS rules for all possible configurations of filler elements\n    for(let i = numberAcross - 1; i >= 0; i--){\n      document.styleSheets[sheetIndex].insertRule(\n        `.budgie-item-${budgie.budgieId}--filler-${i}\n        {\n          width: ${width*(budgie.options.numberWide - i)/2}%;\n          height: ${height*(budgie.options.numberHigh - i)/2}%; flex-grow: 1;\n        }`,\n        numOfSheets\n      );\n    }\n\n    // Get the flex direction based on the budgie direction\n    let direction = budgie.options.direction === 'horizontal' ? 'column' : 'row';\n    // Set flex direction\n    document.styleSheets[sheetIndex].insertRule(\n      `.budgie-container-${budgie.budgieId}{flex-direction: ${direction};}`,\n      numOfSheets\n    );\n\n    // Set the overflow properties based on the budgie direction\n    document.styleSheets[sheetIndex].insertRule(\n      `.budgie-container-parent-${budgie.budgieId}\n      {\n        overflow-x: ${budgie.options.direction === 'horizontal' ? 'scroll' : 'hidden'};\n        overflow-y: ${budgie.options.direction === 'vertical' ? 'scroll' : 'hidden'}\n      }`,\n      numOfSheets\n    );\n  },\n\n  /**\n   * Sets the scroll properties based on the direction of budgie, and element size\n   * @param budgie\n   */\n  setupBudgieScrollProperties : (budgie) => {\n    // Get the scroll property (scrollTop or scrollLeft)\n    let scrollProperty = budgie.scrollProperty();\n\n    // Get the containers measurement\n    let budgieContainer = BudgieDom.measureElementWidthAndHeight(`.budgie-container-${budgie.budgieId}`)\n\n    // Derive the measurements of an individual element\n    let budgieElementMeasure;\n    if(budgie.isHorizontal()) {\n      budgieElementMeasure = budgieContainer.width / budgie.options.numberWide;\n    } else {\n      budgieElementMeasure = budgieContainer.height / budgie.options.numberHigh;\n    }\n\n    // Set the scroll position to the top of the non-duped elements\n    budgie.parentContainer[scrollProperty] = budgieElementMeasure;\n\n    // Bind an event listener to the scroll event\n    budgie.parentContainer.addEventListener(\"scroll\", () => {budgie.onScroll(scrollProperty)});\n  },\n\n  /**\n   * Binds events so that mouse drag will allow for scrolling\n   * @param budgie\n   */\n  setupBudgieMouseDrag : (budgie) => {\n    // Get the scroll property (scrollTop or scrollLeft)\n    let scrollProperty = budgie.scrollProperty();\n\n    // Bind events to handle scrolling with a mouse\n    budgie.parentContainer.addEventListener(\"mousedown\", () => {budgie.mouseDown = true});\n    budgie.parentContainer.addEventListener(\"mouseup\", () => {budgie.mouseDown = false});\n    budgie.parentContainer.addEventListener(\"mouseout\", () => {budgie.mouseDown = false});\n    budgie.parentContainer.addEventListener(\"mousemove\", (event) => { budgie.onMouseMove(event, scrollProperty) });\n  },\n\n  /**\n   * Inserts the budgie elements. This should only be used during first setup\n   * @param budgie\n   */\n  insertBudgieElements : (budgie) => {\n    budgie.items.forEach((item, id) => {\n      // Add a filler item before the odd ending elements\n      // so that odd ending lists will have a centered ending\n      if(budgie.hasOddEnding() && (budgie.items.length - budgie.numberLeftWithOddEnding() === id)){\n        budgie.budgieContainer.appendChild(BudgieDom.createBudgieFillerElement(budgie));\n      }\n\n      // Add the item\n      budgie.budgieContainer.appendChild(BudgieDom.createBudgieElement(budgie, item, id));\n\n      // Add a filler item after the odd ending elements\n      // so that odd ending lists will have a centered ending\n      if(budgie.hasOddEnding() > 0 && (budgie.items.length === id + 1)){\n        budgie.budgieContainer.appendChild(BudgieDom.createBudgieFillerElement(budgie));\n      }\n    });\n\n    // If all the elements fit without scrolling, then add an extra div to allow for updates later\n    if(budgie.fitsInContainer()){\n      let blankEle = document.createElement('div');\n      blankEle.classList.add(`budgie-item-${budgie.budgieId}--blank`);\n      budgie.budgieContainer.appendChild(blankEle);\n    }\n  },\n\n  /**\n   * Creates a filler element with the class based on the number of left over budgie elements\n   * @param budgie\n   * @returns {Element}\n   */\n  createBudgieFillerElement : (budgie) => {\n    let filler = document.createElement('div');\n    filler.classList.add(`budgie-item-${budgie.budgieId}--filler`);\n    filler.classList.add(`budgie-item-${budgie.budgieId}--filler-${budgie.numberLeftWithOddEnding()}`);\n    return filler;\n  },\n\n  /**\n   * Creates a budgie element, and returns that element for use.\n   * @param budgie\n   * @param item\n   * @param itemIndex\n   * @returns {Element}\n   */\n  createBudgieElement : (budgie, item, itemIndex) => {\n    let element = document.createElement('div');\n\n    element.classList.add('budgie-item');\n    element.classList.add(`budgie-item-${budgie.budgieId}`);\n    element.classList.add(`budgie-${budgie.budgieId}-${itemIndex}`);\n\n    const innerDiv = BudgieDom.convertItemToElement(item)\n\n    element.innerHTML = innerDiv.outerHTML;\n\n    return element;\n  },\n\n  /**\n   * Will convert an item to a element so that it can be used in a budgie element\n   * @param item\n   * @returns {*}\n   */\n  convertItemToElement : (item) => {\n    // If the item is a dom element, then return it\n    if(typeof item === 'object' ) return item;\n\n    if(typeof item !== 'string') throw new Error('Only DOM Elements and strings are accepted as budgie items')\n\n    let extension = item.match(/\\.{1}\\w*$/)\n    if(extension) {\n      extension = extension[0].substr(1)\n    }\n\n    let element;\n    if(imageExtensions.includes(extension)) {\n      element = document.createElement('img');\n      element.src = item\n    } else if(videoExtensions.includes(extension)) {\n      element = document.createElement('video');\n      element.src = item\n    }\n\n    if(!element) throw new Error(`Extension of: ${extension} is not supported.`)\n\n    return element;\n  },\n\n  /**\n   * Returns the height and width measurements of the first element matching the given selector\n   * @param selector\n   * @returns {{}}\n   */\n  measureElementWidthAndHeight : (selector) => {\n    let measure = {};\n    const elementComputedStyle = window.getComputedStyle(document.querySelector(selector));\n    measure.height = parseFloat(elementComputedStyle.height);\n    measure.width = parseFloat(elementComputedStyle.width);\n    return measure;\n  },\n});;'use strict';\n\nclass Budgie {\n  /**\n   *\n   * @param items\n   * @param selector\n   * @param options\n   */\n  constructor(items, selector, options = {}) {\n    // Set the parentContainer to be accessable\n    this.parentContainer = document.querySelector(selector);\n    // Apply user options over the default options\n    this.options = Object.assign(this.constructor.defaultOptions(), options);\n    // Sets a random ID to allow for multiple budgies at once\n    this.budgieId = Math.floor((1 + Math.random()) * 0x10000);\n    // save a reference to the items array\n    this.items = items;\n    // create the previousItems array, used when updated via setItems\n    this.previousItems = [];\n    // boolean saying whether there is a mouse currently clicking the budgie element\n    this.mouseDown = false;\n\n    // Provide methods for manipulating the items array\n    var self = this;\n    this.items.pop = function(){\n      let a = Array.prototype.pop.apply(self.items, arguments);\n      self.popItem();\n      return a;\n    };\n    this.items.push = function(){\n      let a = Array.prototype.push.apply(self.items, arguments);\n      self.pushItem();\n      return a;\n    };\n    this.items.shift = function(){\n      let a = Array.prototype.shift.apply(self.items, arguments);\n      self.shiftItem();\n      return a;\n    };\n    this.items.unshift = function(){\n      let a = Array.prototype.unshift.apply(self.items, arguments);\n      self.unshiftItem();\n      return a;\n    };\n    this.items.splice = function(){\n      let a = Array.prototype.splice.apply(self.items, arguments);\n      self.updateAllElements();\n      return a;\n    };\n\n    // Gets the budgie scroller setup for use\n    this.budgieSetup();\n\n    // Will start the scrolling animation if autoStart is true\n    if (this.options.autoStart) {\n      this.budgieAnimate();\n    }\n  }\n\n  /**\n   * Default budgie options are defined here\n   * @returns {{numberHigh: number, numberWide: number, direction: string, secondsOnPage: number, inverted: boolean, autoScroll: boolean, fps: number, infiniteScroll: boolean, autoStart: boolean}}\n   */\n  static defaultOptions() {\n    return {\n      'numberHigh': 1,\n      'numberWide': 1,\n      'direction': 'vertical',\n      'secondsOnPage': 1.0,\n      'inverted': false,\n      'autoScroll': true,\n      'fps': 60,\n      'infiniteScroll': true,\n      'autoStart': true\n    };\n  }\n\n  /**\n   * Will return true if budgie has vertical direction\n   * @returns {boolean}\n   */\n  isVertical() {\n    return this.options.direction === 'vertical';\n  }\n\n  /**\n   * Will return true if budgie has horizontal direction\n   * @returns {boolean}\n   */\n  isHorizontal() {\n    return this.options.direction === 'horizontal';\n  }\n\n  /**\n   * Will be true if the last column/row is not completely full\n   * @returns {boolean}\n   */\n  hasOddEnding() {\n    return this.numberLeftWithOddEnding() > 0;\n  }\n\n  /**\n   * Will return the number of elements that can fit in the budgie container\n   * @returns {number}\n   */\n  elementsOnScreen(){\n    return parseInt(this.options.numberHigh) * parseInt(this.options.numberWide);\n  }\n\n  /**\n   * Will be true if all budgie elements fit into container without scrolling\n   * @returns {boolean}\n   */\n  fitsInContainer() {\n    return this.items.length <= this.elementsOnScreen();\n  }\n\n  /**\n   * Will return the number of elements left on the last line.\n   * Will return 0 if the last line is full\n   * @returns {number}\n   */\n  numberLeftWithOddEnding(){\n    let numberAcross = this.isHorizontal() ? this.options.numberHigh : this.options.numberWide;\n    return (this.items.length % numberAcross);\n  }\n\n  /**\n   * Clears out measurements so that they will be remeasured\n   */\n  clearMeasurements(){\n    this.budgieElementMeasurement = undefined;\n    this.scrollContainerSize = undefined;\n  }\n\n  /**\n   * Will return the scroll property ('scrollTop' or 'scrollLeft') of the budgie instance\n   * @returns {String} The scroll property ('scrollTop' or 'scrollLeft') of the budgie instance\n   */\n  scrollProperty() {\n    if (this.isVertical()) {\n      return 'scrollTop';\n    } else if (this.isHorizontal()) {\n      return 'scrollLeft';\n    }\n  }\n\n  /**\n   * Returns the height and width measurements of the elements associated with the given selector\n   * @param selector\n   * @returns {{}} The height and width measurements of the element associated with the given selector.\n   */\n  elementMeasurement(selector){\n    let measure = {};\n    measure.height = parseFloat(window.getComputedStyle(document.getElementsByClassName(selector)[0]).height);\n    measure.width = parseFloat(window.getComputedStyle(document.getElementsByClassName(selector)[0]).width);\n    return measure;\n  }\n\n  /**\n   * Returns the size of the scroll container for this budgie instance\n   * @returns {number} Measurement in px.\n   */\n  scrollSizeMeasurement(){\n    switch(this.options.direction){\n      case 'vertical':\n        return BudgieDom.measureElementWidthAndHeight(`.budgie-item-${this.budgieId}`).height * (Math.ceil(this.items.length/this.options.numberWide));\n        break;\n      case 'horizontal':\n        return BudgieDom.measureElementWidthAndHeight(`.budgie-item-${this.budgieId}`).width * (Math.ceil(this.items.length/this.options.numberHigh));\n        break;\n    }\n  }\n\n  /**\n   * Updates the items array, and also updates the budgie instance\n   * This method will attempt to not alter any budgie items that do not need altering\n   * It will instead remove no longer needed items, and add new items\n   * @param items\n   */\n  setItems(items){\n    const currentFiller = this.numberLeftWithOddEnding()\n    /**\n     * Will return the indexes (from the old array) of items that were removed\n     * @param oldArray\n     * @param newArray\n     */\n    const removedIndexes = (oldArray, newArray) => {\n      let rawArray = oldArray.map((oldItem, index) => {\n        if(!newArray.some(newItem => newItem === oldItem)){\n          return index;\n        }\n      })\n\n      return rawArray.filter( index => (index || index === 0) );\n    }\n\n\n    /**\n     * Will return the indexes (from the new array) of items that were added\n     * @param oldArray\n     * @param newArray\n     */\n    const addedIndexes = (oldArray, newArray) => {\n      let rawArray = newArray.map((newItem, index) => {\n        if(!oldArray.some(oldItem => oldItem === newItem)){\n          return index;\n        }\n      })\n\n      return rawArray.filter( index => (index || index === 0) );\n    }\n\n\n    this.previousItems = this.items.slice();\n    this.items = items.slice();\n\n    let indexesToRemove = removedIndexes(this.previousItems, this.items);\n    let indexesToAdd = addedIndexes(this.previousItems, this.items);\n\n    // console.log('add:', indexesToAdd, 'remove:', indexesToRemove)\n\n    if(indexesToRemove.length > 0) {\n      indexesToRemove.forEach(index => {\n        this.removeLastItem(index);\n      })\n    }\n\n    if(indexesToAdd.length > 0) {\n      indexesToAdd.forEach(index => {\n        this.addItemAtIndex(index);\n      })\n    }\n\n    // When adding we have to update the index every time\n    const realElements = Array.from(document.querySelectorAll(`.budgie-item-${this.budgieId}:not(.budgie-item-${this.budgieId}--duplicate)`));\n    realElements.forEach((element, index) => {\n      let className = Array.from(element.classList).filter(_className => _className.match(new RegExp(`budgie-${this.budgieId}-\\\\d`)));\n      if(className !== `budgie-${this.budgieId}-${index}`) {\n        element.classList.remove(className);\n        element.classList.add(`budgie-${this.budgieId}-${index}`);\n      }\n    })\n\n    // remove duplicate elements\n    const dupedElements = Array.from(document.querySelectorAll(`.budgie-item-${this.budgieId}.budgie-item-${this.budgieId}--duplicate`));\n    dupedElements.forEach(element => {\n      element.parentNode.removeChild(element);\n    })\n\n    // remove filler elements\n    const fillerElements = Array.from(document.querySelectorAll(`.budgie-item-${this.budgieId}--filler`));\n    fillerElements.forEach(element => {\n      element.parentNode.removeChild(element);\n    })\n\n    // Insert duplicated elements anew, if this is an infinite scroll\n    if(this.options.infiniteScroll) {\n      this.prependStartingItems();\n      this.appendEndingItems();\n    }\n\n    // Add filler items to the end if needed\n    if(this.numberLeftWithOddEnding() > 0) {\n      realElements[realElements.length - this.numberLeftWithOddEnding()]\n        .insertAdjacentElement('beforebegin', BudgieDom.createBudgieFillerElement(this))\n\n      realElements[realElements.length - 1]\n        .insertAdjacentElement('afterend', BudgieDom.createBudgieFillerElement(this))\n    }\n\n    this.clearMeasurements();\n    this.budgieAnimate();\n  }\n\n  /**\n   * Updates the budgie instance based on array changes\n   */\n  pushItem(){\n    this.addLastItem();\n    this.updateBeginningAndEndingItems('add');\n    this.clearMeasurements();\n    this.budgieAnimate();\n  }\n\n  /**\n   * Updates the budgie instance based on array changes\n   */\n  popItem(){\n    this.removeLastItem();\n    this.updateBeginningAndEndingItems('remove');\n    this.clearMeasurements();\n    this.budgieAnimate();\n  }\n\n  /**\n   * Updates the budgie instance based on array changes\n   */\n  shiftItem(){\n    this.updateExistingItems()\n    this.removeLastItem();\n    this.updateBeginningAndEndingItems('remove');\n    this.clearMeasurements();\n    this.budgieAnimate();\n  }\n\n  /**\n   * Updates the budgie instance based on array changes\n   */\n  unshiftItem(){\n    this.updateExistingItems()\n    this.addLastItem();\n    this.updateBeginningAndEndingItems('add');\n    this.clearMeasurements();\n    this.budgieAnimate();\n  }\n\n  /**\n   * Updates the budgie instance based on array changes\n   */\n  updateAllElements(){\n    let elementCount = document.querySelectorAll(`.budgie-item-${this.budgieId}:not(.budgie-item-${this.budgieId}--duplicate)`).length\n    if(this.items.length > elementCount){\n      for(let i = elementCount; i < this.items.length; i++){\n        this.addLastItem(i, i - 1);\n      }\n      this.updateBeginningAndEndingItems('add');\n    } else if (this.items.length < elementCount) {\n      for(let i = elementCount; i > this.items.length; i--){\n        this.removeLastItem(i-1);\n      }\n      this.updateBeginningAndEndingItems('remove');\n    }\n    this.updateExistingItems();\n    this.clearMeasurements();\n    this.budgieAnimate();\n  }\n\n  /**\n   * Prepends duplicate items equal to the last row/column of items\n   */\n  prependStartingItems(){\n    let elementsOnScreen = this.elementsOnScreen();\n    // Store a list of the non duplicated elements\n    const realElements = Array.from(document.querySelectorAll(`.budgie-item-${this.budgieId}:not(.budgie-item-${this.budgieId}--duplicate)`));\n\n    // If the number of elements is greater than the number that fit in the given area\n    if(!this.fitsInContainer()){\n      // Prepends duplicate items equal to the number of elementsOnScreen\n\n      if(this.hasOddEnding()) {\n\n        // The column or row is NOT full, fillers are needed\n        // Add a filler item so that odd ending lists will have a centered ending\n        this.budgieContainer.insertAdjacentElement('afterbegin', BudgieDom.createBudgieFillerElement(this));\n\n        // Add the duplicated elements\n        realElements.slice(\n          realElements.length - this.numberLeftWithOddEnding(),\n          realElements.length\n        )\n          .reverse()\n          .forEach((element) => {\n            let ele = element.cloneNode(true);\n            ele.classList.add(`budgie-item-${this.budgieId}--duplicate`);\n            this.budgieContainer.insertAdjacentElement('afterbegin', ele);\n          });\n\n        // Add a filler item so that odd ending lists will have a centered ending\n        this.budgieContainer.insertAdjacentElement('afterbegin', BudgieDom.createBudgieFillerElement(this));\n      } else {\n        // The column or row is full, not fillers needed\n        let elementsToDupe = this.isHorizontal() ? this.options.numberHigh : this.options.numberWide;\n\n        // Add the duplicated elements\n        realElements.slice(\n          realElements.length - elementsToDupe,\n          realElements.length\n        )\n          .reverse()\n          .forEach((element) => {\n            let ele = element.cloneNode(true);\n            ele.classList.add(`budgie-item-${this.budgieId}--duplicate`);\n            this.budgieContainer.insertAdjacentElement('afterbegin', ele);\n          });\n      }\n    }\n  }\n\n  /**\n   * Appends duplicate items equal to the number that fit in the view (numberHigh * numberWide)\n   */\n  appendEndingItems(){\n    let elementsOnScreen = this.elementsOnScreen();\n    // Store a list of the non duplicated elements\n    const realElements = Array.from(document.querySelectorAll(`.budgie-item-${this.budgieId}:not(.budgie-item-${this.budgieId}--duplicate)`));\n\n    // If the number of elements is greater than the number that fit in the given area\n    if(!this.fitsInContainer()){\n      // Appends duplicate items equal to the number of elementsOnScreen\n      realElements.slice(\n        0,\n        elementsOnScreen\n      )\n        .forEach((element) => {\n          let ele = element.cloneNode(true);\n          ele.classList.add(`budgie-item-${this.budgieId}--duplicate`);\n          ele.classList.add(`budgie-item-${this.budgieId}--duplicate-ending`);\n          this.budgieContainer.insertAdjacentElement('beforeend', ele);\n        });\n    }\n  }\n\n  addItemAtIndex(index){\n    // Get the element before where we want to add if the index is >0\n    let realElements = Array.from(document.querySelectorAll(`.budgie-item-${this.budgieId}:not(.budgie-item-${this.budgieId}--duplicate)`));\n    const newElement = BudgieDom.createBudgieElement(this, this.items[index], index);\n\n    // This allows for items to be added even if budgie is instantiated as empty\n    if(realElements.length === 0) {\n      realElements = Array.from(document.querySelectorAll(`.budgie-item-${this.budgieId}--blank`));\n    }\n\n    if(index > 0) {\n      realElements[index-1].insertAdjacentElement('afterend', newElement)\n    } else {\n      realElements[index].insertAdjacentElement('beforebegin', newElement)\n    }\n  }\n\n  /**\n   * Removes an item from the end of the budgie list\n   * @param eleIndex\n   */\n  removeLastItem(eleIndex = this.items.length){\n    let elements = document.getElementsByClassName(`budgie-${this.budgieId}-${eleIndex}`);\n    Array.from(elements).forEach(element => {\n      element.parentNode.removeChild(element);\n    })\n  }\n\n  /**\n   * Adds an item to the end of the budgie list\n   * @param itemIndex\n   * @param eleIndex\n   */\n  addLastItem(itemIndex = this.items.length - 1, eleIndex = this.items.length - 2){\n    // eleIndex; subtract 2 to account for using length not index, and also to get the last element before the push\n    let elements = document.getElementsByClassName(`budgie-${this.budgieId}-${eleIndex}`);\n    if(!elements.length > 0){\n      elements = document.getElementsByClassName(`budgie-item-${this.budgieId}--blank`)\n    }\n\n    let newElement = BudgieDom.createBudgieElement(this, this.items[itemIndex], itemIndex);\n    // Insert at the end of the main list\n    // We use index of 1, because the last few items are duplicated at the top\n    let index = 0\n    if(elements.length > 1) { index = 1 }\n    elements[index].parentNode.insertBefore(newElement, elements[index].nextSibling);\n  }\n\n  /**\n   * Updates the existing items by replacing their html\n   */\n  updateExistingItems(){\n    this.items.forEach((item, index) => {\n      Array.from(document.getElementsByClassName(`budgie-${this.budgieId}-${index}`)).forEach((element) => {\n        // If the element has changed then update, otherwise do nothing\n\n        let newElement = BudgieDom.createBudgieElement(this, item, index);\n        // update the element if it does not currently match\n        if (element.innerHTML !== newElement.innerHTML) {\n          element.innerHTML = newElement.innerHTML;\n        }\n      });\n    });\n  }\n\n  /**\n   * Calls both updateListStart and updateListEnding in the correct order\n   * @param method\n   */\n  updateBeginningAndEndingItems(method) {\n    this.updateListStart();\n    this.updateListEnding(method);\n  }\n\n  /**\n   * Updates the duplicated elements that come before the real budgie elements\n   */\n  updateListStart() {\n    let numberAtTop;\n    if (this.hasOddEnding()) {\n      numberAtTop = this.numberLeftWithOddEnding();\n    } else {\n      numberAtTop = this.isHorizontal() ? this.options.numberHigh : this.options.numberWide;\n    }\n\n    let realElements = Array.from(document.querySelectorAll(`.budgie-item-${this.budgieId}:not(.budgie-item-${this.budgieId}--duplicate)`));\n\n    // Trim the number of elements across one row to get rid of the bottom dupes\n    let dupedElements = Array.from(document.querySelectorAll(`.budgie-item-${this.budgieId}.budgie-item-${this.budgieId}--duplicate`));\n    let topOfDupedElements = dupedElements.slice(0, dupedElements.length - this.elementsOnScreen());\n\n    // These elements should become the new duped top row\n    let lastRowOfRealElements = realElements.slice(realElements.length - numberAtTop, realElements.length);\n\n    const firstRealElement = realElements[0];\n\n    // If there are more existing elements than we need, then trim that list\n    if(topOfDupedElements.length > lastRowOfRealElements.length) {\n      let numberOff = topOfDupedElements.length - lastRowOfRealElements.length\n\n      for(let i = 0; i < numberOff; i += 1) {\n        topOfDupedElements[i].parentNode.removeChild(topOfDupedElements[i]);\n        topOfDupedElements.shift();\n      }\n    }\n\n    // Exit early if the list is not long enough to scroll\n    if(this.fitsInContainer()){ return; }\n\n    // Update the existing elements, and add new if needed\n    lastRowOfRealElements.forEach((element, index) => {\n      let ele = element.cloneNode(true);\n      ele.classList.add(`budgie-item-${this.budgieId}--duplicate`);\n      if(topOfDupedElements[index]){\n        topOfDupedElements[index].outerHTML = ele.outerHTML\n      } else {\n        firstRealElement.parentNode.insertBefore(ele, firstRealElement);\n      }\n    })\n  }\n\n  /**\n   * Updates the Duplicated elements that are on the end of the list.\n   * @param method\n   * @param redraw\n   */\n  updateListEnding(method, redraw=false){\n    let operator;\n    if(method === 'remove'){\n      operator = 1\n    } else if(method === 'add'){\n      // this covers 'add'\n      operator = -1\n    } else {\n      throw new Error(\"Only 'add' and 'remove' are supported arguments\")\n    }\n\n    if(redraw){\n      Array.from(document.getElementsByClassName(`budgie-item-${this.budgieId}--filler`)).forEach(element =>\n        element.parentNode.removeChild(element));\n    }\n\n    if(this.hasOddEnding()){\n      if(document.getElementsByClassName(`budgie-item-${this.budgieId}--filler`).length === 0) {\n        let lastElements = Array.from(document.getElementsByClassName(`budgie-${this.budgieId}-${this.items.length - 1}`));\n        let firstElements = Array.from(document.getElementsByClassName(`budgie-${this.budgieId}-${this.items.length - this.numberLeftWithOddEnding()}`));\n        // Put fill around all elements that need it. At the top, and the bottom.\n        lastElements.forEach(lastElement => {\n          lastElement.parentNode.insertBefore(BudgieDom.createBudgieFillerElement(this), lastElement.nextSibling);\n        })\n        firstElements.forEach(firstElement => {\n          firstElement.parentNode.insertBefore(BudgieDom.createBudgieFillerElement(this), firstElement);\n        })\n      } else {\n        Array.from(document.getElementsByClassName(`budgie-item-${this.budgieId}--filler`)).forEach((element) => {\n          element.classList.remove(`budgie-item-${this.budgieId}--filler-${this.numberLeftWithOddEnding() + operator}`);\n          element.classList.add(`budgie-item-${this.budgieId}--filler-${this.numberLeftWithOddEnding()}`);\n        });\n      }\n    } else {\n      Array.from(document.getElementsByClassName(`budgie-item-${this.budgieId}--filler`)).forEach(element =>\n        element.parentNode.removeChild(element));\n    }\n\n    // If all elements fit in the container and scrolling is not needed\n    if(this.fitsInContainer()) {\n      Array.from(document.getElementsByClassName(`budgie-item-${this.budgieId}--duplicate`)).forEach(element =>\n        element.parentNode.removeChild(element));\n\n      // Append an extra div so that new items can be added\n      if(document.getElementsByClassName(`budgie-item-${this.budgieId}--blank`).length === 0){\n        let blankEle = document.createElement('div');\n        blankEle.classList.add(`budgie-item-${this.budgieId}--blank`);\n        this.budgieContainer.appendChild(blankEle);\n      }\n    }\n\n    if(!this.fitsInContainer() && document.getElementsByClassName(`budgie-item-${this.budgieId}--duplicate-ending`).length === 0){\n      this.appendEndingItems();\n\n      Array.from(document.getElementsByClassName(`budgie-item-${this.budgieId}--blank`)).forEach(blankEle =>\n        blankEle.parentNode.removeChild(blankEle));\n    }\n  }\n\n  /**\n  * Will reset the budgie elements scrollProperty if it hits a wrap point.\n  * @param {string} scrollDirection - The scroll direction of the given budgie instance.\n  *   can be 'scrollTop' or 'scrollLeft'\n  * @returns undefined\n  * */\n  onScroll(scrollDirection) {\n    if(!this.scrollContainerSize) {\n      this.scrollContainerSize = this.scrollSizeMeasurement();\n    }\n\n    if(!this.budgieElementMeasurement) {\n      let budgieElement = BudgieDom.measureElementWidthAndHeight(`.budgie-item-${this.budgieId}`);\n      this.budgieElementMeasurement = Math.floor(this.isHorizontal() ? budgieElement.width : budgieElement.height);\n    }\n\n    // console.log('scroll at: ' + this.parentContainer[scrollDirection], 'container size: ' + this.scrollContainerSize, 'element size: ' + this.budgieElementMeasurement)\n\n    if((this.parentContainer[scrollDirection] >= this.scrollContainerSize + this.budgieElementMeasurement)) {\n      this.parentContainer[scrollDirection] = this.budgieElementMeasurement;\n    } else if((this.parentContainer[scrollDirection] <= 0 )) {\n      this.parentContainer[scrollDirection] = this.scrollContainerSize;\n    }\n  }\n\n  onMouseMove(event, scrollDirection) {\n    // If the mouse is not down, then we don't care, bail early\n    if(!this.mouseDown) { return }\n\n    this.parentContainer[scrollDirection] -= this.isHorizontal() ? event.movementX : event.movementY;\n    console.log(\"mouse moved\", event)\n  }\n\n  /**\n   * Sets up the budgie scroller to be ready for use\n   */\n  budgieSetup() {\n    this.budgieContainer = BudgieDom.setupBudgieContainer(this);\n    BudgieDom.setupBudgieCSS(this);\n    BudgieDom.insertBudgieElements(this);\n    BudgieDom.setupBudgieMouseDrag(this);\n    // Only append extra items, and bind the scroll event if this is infinite scroll.\n    if(this.options.infiniteScroll){\n      this.appendEndingItems();\n      this.prependStartingItems();\n      BudgieDom.setupBudgieScrollProperties(this);\n    }\n  }\n\n  /**\n   * Controls the scrolling animation when budgie is set to autoscroll\n   */\n  budgieAnimate() {\n    // Will not animate if autoScroll is off\n    if(!this.options.autoScroll) { return }\n\n    // How many times the animation should run per second\n    const fps =  this.options.fps;\n\n    // Will be either scrollTop or scrollLeft\n    let scrollDirection = this.scrollProperty();\n\n    // The current value of the scrollDirection\n    let currentScroll;\n\n    // The measurement of the budgie container\n    let budgieContainerMeasurements =\n      BudgieDom.measureElementWidthAndHeight(`.budgie-container-${this.budgieId}`);\n\n    // The axis measurement based on the direction\n    let viewMeasure = (this.isHorizontal()) ?\n      budgieContainerMeasurements.width : budgieContainerMeasurements.height;\n\n    // Calculate scrollspeed, this will dictate how far the budgie scroller moves with each frame\n    // This must be a whole number > 0 so we round up.\n    let scrollSpeed = Math.ceil(viewMeasure / this.options.secondsOnPage / fps);\n\n    // Clear out any existing animations, which allows for use of this on redraws\n    this.stopAnimate();\n\n    // Only animate if the elements do not all fit in the container\n    if(!this.fitsInContainer()){\n      // This effectively kick starts the scrolling. It's unclear why exactly it is needed,\n      // though it is related to scroll properties\n      this.budgieContainer.parentElement[scrollDirection] += 1\n      this.budgieContainer.parentElement[scrollDirection] -= 1\n\n      this.interval = setInterval(() => {\n        // Get the current value of the scroll\n        currentScroll = this.budgieContainer.parentElement[scrollDirection];\n\n        // Add or subtract from the current value based on inverted or not\n        this.options.inverted ? (currentScroll += scrollSpeed) : (currentScroll -= scrollSpeed);\n\n        // Apply the new scroll value\n        this.budgieContainer.parentElement[scrollDirection] = currentScroll;\n      }, 1000/fps);\n    } else {\n      // Set the scroll property to 0 if all elements fit in the container\n      // This is used when animate is called on a redraw\n      this.budgieContainer.parentElement[scrollDirection] = 0;\n    }\n  }\n\n  /**\n   * Will toggle the inverted property of the Budgie element\n   */\n  changeInversion(){\n    this.options.inverted = !this.options.inverted;\n  }\n\n  /**\n   * Clears the interval that controls the scrolling\n   * @returns {boolean}\n   */\n  stopAnimate() {\n    if(!this.interval) return false;\n    window.clearInterval(this.interval);\n    return true;\n  }\n\n  /**\n   * Removes the Budgie element from the DOM\n   */\n  removeBudgie() {\n    this.stopAnimate();\n    this.budgieContainer.parentElement.classList.remove(`budgie-container-parent-${this.budgieId}`);\n    this.budgieContainer.parentElement.removeChild(this.budgieContainer);\n  }\n}\n\n// Set Budgie as a global variable for use\nif( typeof global !== 'undefined')\n  global.Budgie = Budgie;\n"]}