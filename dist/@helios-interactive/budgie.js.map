{"version":3,"sources":["budgie.concat.js"],"names":["Budgie","items","selector","options","Object","assign","constructor","defaultOptions","isNew","budgieId","Math","floor","random","self","pop","a","Array","prototype","apply","arguments","popItem","push","pushItem","shift","shiftItem","unshift","unshiftItem","splice","updateAllElements","start","parentContainer","getElement","classList","add","budgieFlexContainer","document","createElement","appendChild","setCSS","container","scrollDirection","scrollProperty","budgieElement","elementMeasurement","budgieElementMeasure","direction","width","height","addEventListener","onScroll","numberAcross","numberHigh","numberWide","length","eleWidth","parseInt","window","getComputedStyle","numOfSheets","styleSheets","cssRules","insertRule","imageFit","i","forEach","item","id","numberLeftWithOddEnding","newFillerItem","createElementForItem","elementsOnScreen","blankEle","type","filler","realElements","from","getElementsByClassName","insertAdjacentElement","slice","reverse","element","ele","cloneNode","elementsToDupe","addLastItem","updateListEnding","removeLastItem","updateExistingItems","elementCount","querySelectorAll","eleIndex","elements","parentNode","removeChild","itemIndex","newElement","insertBefore","nextSibling","index","innerHTML","createItemAsElement","outerHTML","method","redraw","numberToCopy","operator","Error","lastElement","firstElement","remove","appendExtraItems","measure","parseFloat","ceil","scrollContainerSize","scrollSizeMeasurement","fps","scrollContainer","parentElement","currentScroll","viewMeasure","scrollSpeed","secondsOnPage","stop","interval","setInterval","inverted","setupContainer","insertItems","prependExtraItems","setupScrollProperties","autoScroll","startAnimation","clearInterval","splitSelector","substring","getElementById","e","style","backgroundImage","extension","match","substr","imageExtensions","videoExtensions","includes","src","global"],"mappings":"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","file":"budgie.js","sourcesContent":["'use strict';\r\nclass Budgie {\r\n\r\n  /**\r\n   *\r\n   * @param items\r\n   * @param selector\r\n   * @param options\r\n   */\r\n  constructor(items, selector, options = {}) {\r\n\r\n    this.selector = selector;\r\n    this.options = Object.assign(this.constructor.defaultOptions(), options);\r\n\r\n    this.isNew = true;\r\n    this.budgieId = Math.floor((1 + Math.random()) * 0x10000);\r\n    this.items = items;\r\n\r\n    var self = this;\r\n    this.items.pop = function(){\r\n      let a = Array.prototype.pop.apply(self.items, arguments);\r\n      self.popItem();\r\n      return a;\r\n    };\r\n    this.items.push = function(){\r\n      let a = Array.prototype.push.apply(self.items, arguments);\r\n      self.pushItem();\r\n      return a;\r\n    };\r\n    this.items.shift = function(){\r\n      let a = Array.prototype.shift.apply(self.items, arguments);\r\n      self.shiftItem();\r\n      return a;\r\n    };\r\n    this.items.unshift = function(){\r\n      let a = Array.prototype.unshift.apply(self.items, arguments);\r\n      self.unshiftItem();\r\n      return a;\r\n    };\r\n    this.items.splice = function(){\r\n      let a = Array.prototype.splice.apply(self.items, arguments);\r\n      self.updateAllElements();\r\n      return a;\r\n    };\r\n\r\n    this.start();\r\n  }\r\n\r\n  static defaultOptions() {\r\n    return {\r\n      'numberHigh': 1,\r\n      'numberWide': 1,\r\n      'noScrollIfNoOverflow': true,\r\n      'direction': 'vertical',\r\n      'secondsOnPage': 1.0,\r\n      'stopOnHover': false,\r\n      'inverted': false,\r\n      'autoScroll': true,\r\n      'userNavigation': false,\r\n      'imageFit': 'cover',\r\n      'fps': 60\r\n    };\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @param selector either an id, class, or DOM element\r\n   * @returns {{}} returns the DOM element that matches the selector\r\n   */\r\n  static getElement(selector) {\r\n    // allow dom elements to get passed in directly\r\n    if(typeof selector === 'object' ) return selector;\r\n\r\n    let splitSelector = selector.substring(0, 1);\r\n    switch(splitSelector){\r\n      case '.':\r\n        return document.getElementsByClassName(selector.substring(1))[0];\r\n        break;\r\n      case '#':\r\n        return document.getElementById(selector.substring(1));\r\n        break;\r\n      default:\r\n        throw new Error(\"The selector must be a class or id, prepended by the identifier ('.'/'#')\");\r\n    }\r\n  }\r\n\r\n  setupContainer() {\r\n    let parentContainer = this.constructor.getElement(this.selector);\r\n    parentContainer.classList.add(`budgie-flex-container-parent`);\r\n    parentContainer.classList.add(`budgie-flex-container-parent-${this.budgieId}`);\r\n    this.parentContainer = parentContainer;\r\n\r\n    let budgieFlexContainer = document.createElement('div');\r\n    budgieFlexContainer.classList.add('budgie-flex-container');\r\n    budgieFlexContainer.classList.add(`budgie-container-${this.budgieId}`);\r\n    parentContainer.appendChild(budgieFlexContainer);\r\n    this.setCSS(budgieFlexContainer);\r\n\r\n    this.container = budgieFlexContainer;\r\n  }\r\n\r\n  setupScrollProperties() {\r\n    let self = this;\r\n    let scrollDirection = this.scrollProperty();\r\n\r\n    if(this.isNew) {\r\n      let budgieElement = this.elementMeasurement(`budgie-flex-item-${this.budgieId}`)\r\n      let budgieElementMeasure = this.options.direction === 'horizontal' ? budgieElement.width : budgieElement.height\r\n\r\n      // Set the scroll position to the top of the non-duped elements\r\n      this.parentContainer[scrollDirection] = budgieElementMeasure;\r\n    }\r\n\r\n    this.parentContainer.addEventListener(\"scroll\", function(){self.onScroll(scrollDirection)});\r\n  }\r\n\r\n  numberLeftWithOddEnding(){\r\n    let numberAcross = (this.options.direction === 'horizontal') ? this.options.numberHigh : this.options.numberWide;\r\n    return (this.items.length % numberAcross);\r\n  }\r\n\r\n  setCSS(container){\r\n    const eleWidth = parseInt(window.getComputedStyle(container).width);\r\n    let numOfSheets = 0;\r\n    if(document.styleSheets[0].cssRules) {\r\n      numOfSheets = document.styleSheets[0].cssRules.length;\r\n    }\r\n\r\n    const numberAcross = (this.options.direction === 'horizontal') ? this.options.numberHigh : this.options.numberWide;\r\n\r\n    // Width in %\r\n    const width = ((eleWidth / this.options.numberWide / eleWidth) * 100);\r\n    const height = (100 / this.options.numberHigh);\r\n\r\n    document.styleSheets[0].insertRule(`.budgie-flex-item-${this.budgieId}{width: ${width}%; height: ${height}%;}`, numOfSheets);\r\n    document.styleSheets[0].insertRule(`.budgie-flex-item-image-${this.budgieId}{background-size: ${this.options.imageFit};}`, numOfSheets);\r\n\r\n    for(let i = numberAcross - 1; i >= 0; i--){\r\n      document.styleSheets[0].insertRule(`.budgie-flex-item-${this.budgieId}--filler-${i}{width: ${width*(numberAcross - i)/2}%; height: ${height*(numberAcross - i)/2}%; flex-grow: 1;}`, numOfSheets);\r\n    }\r\n\r\n    let direction = this.options.direction === 'horizontal' ? 'column' : 'row';\r\n    document.styleSheets[0].insertRule(`.budgie-container-${this.budgieId}{flex-direction: ${direction};}`, numOfSheets);\r\n\r\n    document.styleSheets[0].insertRule(`.budgie-flex-container-parent-${this.budgieId}{overflow-x: ${this.options.direction === 'horizontal' ? 'scroll' : 'hidden'}; overflow-y: ${this.options.direction === 'vertical' ? 'scroll' : 'hidden'}}`, numOfSheets);\r\n  }\r\n\r\n  static createElementForItem(item, id, budgieId){\r\n    let e = document.createElement('div');\r\n\r\n    if(typeof item === 'string') {\r\n      e.style.backgroundImage = `url(${item})`;\r\n      e.classList.add(`budgie-flex-item-image-${budgieId}`);\r\n    } else {\r\n      e.appendChild(item);\r\n    }\r\n    e.classList.add('budgie-flex-item');\r\n    e.classList.add(`budgie-flex-item-${budgieId}`);\r\n    e.classList.add(`budgie-${budgieId}-${id}`);\r\n    return e;\r\n  }\r\n\r\n  insertItems(){\r\n    this.items.forEach((item, id) => {\r\n      // Add a filler item so that odd ending lists will have a centered ending\r\n      if(this.numberLeftWithOddEnding() > 0 && (this.items.length - this.numberLeftWithOddEnding() === id)){\r\n        this.container.appendChild(this.newFillerItem('ending'));\r\n      }\r\n\r\n      // Add the item\r\n      this.container.appendChild(this.constructor.createElementForItem(item, id, this.budgieId));\r\n\r\n      // Add a filler item so that odd ending lists will have a centered ending\r\n      if(this.numberLeftWithOddEnding() > 0 && (this.items.length === id + 1)){\r\n        this.container.appendChild(this.newFillerItem('ending'));\r\n      }\r\n    });\r\n    if(this.items.length < this.elementsOnScreen()){\r\n      // Append an extra div so that new items can be added\r\n      let blankEle = document.createElement('div');\r\n      blankEle.classList.add(`budgie-flex-item-${this.budgieId}--blank`);\r\n      this.container.appendChild(blankEle);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Creates a filler element of the given type\r\n   * @param {String} - either 'start' or 'ending'\r\n   * @returns {Element}\r\n   */\r\n  newFillerItem(type){\r\n    let filler = document.createElement('div');\r\n    filler.classList.add(`budgie-flex-item-${this.budgieId}--filler`);\r\n    filler.classList.add(`budgie-flex-item-${this.budgieId}--filler-${type}`);\r\n    filler.classList.add(`budgie-flex-item-${this.budgieId}--filler-${this.numberLeftWithOddEnding()}`);\r\n    return filler;\r\n  }\r\n\r\n  /**\r\n   * Prepends duplicate items equal to the last row/column of items\r\n   */\r\n  prependExtraItems(){\r\n    let elementsOnScreen = this.elementsOnScreen();\r\n    // Store a list of the non duplicated elements\r\n    const realElements = Array.from(document.getElementsByClassName(`budgie-flex-item-${this.budgieId}`));\r\n\r\n    // Prepends duplicate items equal to the number of elementsOnScreen\r\n    if(this.items.length > elementsOnScreen) {\r\n      if(this.numberLeftWithOddEnding() > 0) {\r\n        // The column or row is NOT full, fillers are needed\r\n        // Add a filler item so that odd ending lists will have a centered ending\r\n        this.container.insertAdjacentElement('afterbegin', this.newFillerItem('start'));\r\n\r\n        // Add the duplicated elements\r\n        realElements.slice(\r\n          realElements.length - this.numberLeftWithOddEnding(),\r\n          realElements.length\r\n        )\r\n          .reverse()\r\n          .forEach((element) => {\r\n            let ele = element.cloneNode(true);\r\n            ele.classList.add(`budgie-flex-item-${this.budgieId}--duplicate`);\r\n            ele.classList.add(`budgie-flex-item-${this.budgieId}--start`);\r\n            this.container.insertAdjacentElement('afterbegin', ele);\r\n          });\r\n\r\n        // Add a filler item so that odd ending lists will have a centered ending\r\n        this.container.insertAdjacentElement('afterbegin', this.newFillerItem('start'));\r\n      } else {\r\n        // The column or row is full, not fillers needed\r\n        let elementsToDupe = this.options.direction === 'horizontal' ? this.options.numberHigh : this.options.numberWide;\r\n\r\n        // Add the duplicated elements\r\n        realElements.slice(\r\n          realElements.length - elementsToDupe,\r\n          realElements.length\r\n        )\r\n          .reverse()\r\n          .forEach((element) => {\r\n            let ele = element.cloneNode(true);\r\n            ele.classList.add(`budgie-flex-item-${this.budgieId}--duplicate`);\r\n            ele.classList.add(`budgie-flex-item-${this.budgieId}--start`);\r\n            this.container.insertAdjacentElement('afterbegin', ele);\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Appends duplicate items equal to the number that fit in the view (numberHigh * numberWide)\r\n   */\r\n  appendExtraItems(){\r\n    let elementsOnScreen = this.elementsOnScreen();\r\n    // Store a list of the non duplicated elements\r\n    const realElements = Array.from(document.getElementsByClassName(`budgie-flex-item-${this.budgieId}`));\r\n\r\n    // If the number of elements is greater than the number that fit in the given area\r\n    if(this.items.length > elementsOnScreen){\r\n      // Appends duplicate items equal to the number of elementsOnScreen\r\n      realElements.slice(\r\n        0,\r\n        elementsOnScreen\r\n      )\r\n        .forEach((element) => {\r\n          let ele = element.cloneNode(true);\r\n          ele.classList.add(`budgie-flex-item-${this.budgieId}--duplicate`);\r\n          ele.classList.add(`budgie-flex-item-${this.budgieId}--ending`);\r\n          this.container.insertAdjacentElement('beforeend', ele);\r\n        });\r\n\r\n    }\r\n  }\r\n\r\n  elementsOnScreen(){\r\n    return parseInt(this.options.numberHigh) * parseInt(this.options.numberWide);\r\n  }\r\n\r\n  pushItem(){\r\n    this.addLastItem();\r\n    this.updateListEnding('add');\r\n    this.start();\r\n  }\r\n\r\n  popItem(){\r\n    this.removeLastItem();\r\n    this.updateListEnding('remove');\r\n    this.start();\r\n  }\r\n\r\n  shiftItem(){\r\n    this.updateExistingItems()\r\n    this.removeLastItem();\r\n    this.updateListEnding('remove');\r\n    this.start();\r\n  }\r\n\r\n  unshiftItem(){\r\n    this.updateExistingItems()\r\n    this.addLastItem();\r\n    this.updateListEnding('add');\r\n    this.start();\r\n  }\r\n\r\n  updateAllElements(){\r\n    let elementCount = document.querySelectorAll(`.budgie-flex-item-${this.budgieId}:not(.budgie-flex-item-${this.budgieId}--duplicate)`).length\r\n    if(this.items.length > elementCount){\r\n      for(let i = elementCount; i < this.items.length; i++){\r\n        this.addLastItem(i, i - 1);\r\n      }\r\n      this.updateListEnding('add', true);\r\n    } else if (this.items.length < elementCount) {\r\n      for(let i = elementCount; i > this.items.length; i--){\r\n        this.removeLastItem(i-1);\r\n      }\r\n      this.updateListEnding('remove', true);\r\n    }\r\n    this.updateExistingItems()\r\n    this.start();\r\n  }\r\n\r\n  removeLastItem(eleIndex = this.items.length){\r\n    let elements = document.getElementsByClassName(`budgie-${this.budgieId}-${eleIndex}`);\r\n    Array.from(elements).forEach(element => {\r\n      element.parentNode.removeChild(element);\r\n    })\r\n  }\r\n\r\n  addLastItem(itemIndex = this.items.length - 1, eleIndex = this.items.length - 2){\r\n    // eleIndex; subtract 2 to account for using length not index, and also to get the last element before the push\r\n    let elements = document.getElementsByClassName(`budgie-${this.budgieId}-${eleIndex}`);\r\n    let newElement = this.constructor.createElementForItem(this.items[itemIndex], itemIndex, this.budgieId);\r\n    elements[0].parentNode.insertBefore(newElement, elements[0].nextSibling);\r\n  }\r\n\r\n  /**\r\n   * Will accept an item, and output that as the correct element\r\n   * @param item\r\n   */\r\n  static createItemAsElement(item){\r\n    // If the item is a dom element, then return it\r\n    if(typeof item === 'object' ) return item;\r\n\r\n    if(typeof item !== 'String') throw new Error('Only DOM Elements and strings are accepted as budgie items')\r\n\r\n    let extension = item.match(/\\.{1}\\w*$/)\r\n    if(extension) {\r\n      extension = extension[0].substr(1)\r\n    }\r\n\r\n    const imageExtensions = ['jpg', 'gif', 'png'];\r\n    const videoExtensions = ['mp4','ogg', 'webm'];\r\n\r\n    let element;\r\n    if(imageExtensions.includes(extension)) {\r\n      element = document.createElement('img');\r\n      element.src = item\r\n    } else if(videoExtensions.includes(extension)) {\r\n      element = document.createElement('video');\r\n      element.src = item\r\n    }\r\n\r\n    if(!element) throw new Error(`Extension of: ${extension} is not supported.`)\r\n\r\n    return element;\r\n  }\r\n\r\n  /**\r\n   * Updates the existing items by replacing their html\r\n   */\r\n  updateExistingItems(){\r\n    this.items.forEach((item, index) => {\r\n      Array.from(document.getElementsByClassName(`budgie-${this.budgieId}-${index}`)).forEach((element) => {\r\n        // If the element has changed then update, otherwise do nothing\r\n        if (element.innerHTML !== this.constructor.createItemAsElement(item).outerHTML) {\r\n          element.innerHTML = this.constructor.createItemAsElement(item);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  updateListStart(method, redraw=false){\r\n    let numberToCopy;\r\n    if(this.numberLeftWithOddEnding() > 0){\r\n      numberToCopy = this.numberLeftWithOddEnding();\r\n    } else {\r\n      numberToCopy = this.options.direction === 'horizontal' ? this.options.numberHigh : this.options.numberWide;\r\n    }\r\n\r\n    if(redraw) {\r\n      Array.from(document.getElementsByClassName(`budgie-flex-item-${this.budgieId}--filler-start`)).forEach(element =>\r\n        element.parentNode.removeChild(element));\r\n    }\r\n\r\n\r\n    this.items.slice(this.items.length)\r\n  }\r\n\r\n  /**\r\n   * Updates the Duplicated elements that are on the end of the list.\r\n   * @param method\r\n   * @param redraw\r\n   */\r\n  updateListEnding(method, redraw=false){\r\n    let operator;\r\n    if(method === 'remove'){\r\n      operator = 1\r\n    } else if(method === 'add'){\r\n      // this covers 'add'\r\n      operator = -1\r\n    } else {\r\n      throw new Error(\"Only 'add' and 'remove' are supported arguments\")\r\n    }\r\n\r\n    if(redraw) {\r\n      Array.from(document.getElementsByClassName(`budgie-flex-item-${this.budgieId}--filler-ending`)).forEach(element =>\r\n        element.parentNode.removeChild(element));\r\n    }\r\n\r\n    if(this.numberLeftWithOddEnding() > 0){\r\n      if(document.getElementsByClassName(`budgie-flex-item-${this.budgieId}--filler-ending`).length === 0) {\r\n        let lastElement = document.getElementsByClassName(`budgie-${this.budgieId}-${this.items.length - 1}`)[0];\r\n        let firstElement = document.getElementsByClassName(`budgie-${this.budgieId}-${this.items.length - this.numberLeftWithOddEnding()}`)[0];\r\n        firstElement.parentNode.insertBefore(this.newFillerItem('ending'), firstElement);\r\n        lastElement.parentNode.insertBefore(this.newFillerItem('ending'), lastElement.nextSibling);\r\n      } else {\r\n        Array.from(document.getElementsByClassName(`budgie-flex-item-${this.budgieId}--filler-ending`)).forEach((element) => {\r\n          element.classList.remove(`budgie-flex-item-${this.budgieId}--filler-${this.numberLeftWithOddEnding() + operator}`);\r\n          element.classList.add(`budgie-flex-item-${this.budgieId}--filler-${this.numberLeftWithOddEnding()}`);\r\n        });\r\n      }\r\n    } else {\r\n      Array.from(document.getElementsByClassName(`budgie-flex-item-${this.budgieId}--filler-ending`)).forEach(element =>\r\n        element.parentNode.removeChild(element));\r\n    }\r\n\r\n    if(this.items.length <= this.elementsOnScreen()) {\r\n      Array.from(document.getElementsByClassName(`budgie-flex-item-${this.budgieId}--ending`)).forEach(element =>\r\n        element.parentNode.removeChild(element));\r\n\r\n      // Append an extra div so that new items can be added\r\n      if(document.getElementsByClassName(`budgie-flex-item-${this.budgieId}--blank`).length === 0){\r\n        let blankEle = document.createElement('div');\r\n        blankEle.classList.add(`budgie-flex-item-${this.budgieId}--blank`);\r\n        this.container.appendChild(blankEle);\r\n      }\r\n    }\r\n\r\n    if(this.items.length > this.elementsOnScreen() && document.getElementsByClassName(`budgie-flex-item-${this.budgieId}--duplicate`).length === 0){\r\n      this.appendExtraItems();\r\n\r\n      Array.from(document.getElementsByClassName(`budgie-flex-item-${this.budgieId}--blank`)).forEach(blankEle =>\r\n        blankEle.parentNode.removeChild(blankEle));\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the height and width measurements of the elements associated with the given selector\r\n   * @param selector\r\n   * @returns {{}} The height and width measurements of the element associated with the given selector.\r\n   */\r\n  elementMeasurement(selector){\r\n    let measure = {};\r\n    measure.height = parseFloat(window.getComputedStyle(document.getElementsByClassName(selector)[0]).height);\r\n    measure.width = parseFloat(window.getComputedStyle(document.getElementsByClassName(selector)[0]).width);\r\n    return measure;\r\n  }\r\n\r\n  /**\r\n   * Returns the size of the scroll container for this budgie instance\r\n   * @returns {number} Measurement in px.\r\n   */\r\n  scrollSizeMeasurement(){\r\n    switch(this.options.direction){\r\n      case 'vertical':\r\n        return this.elementMeasurement(`budgie-flex-item-${this.budgieId}`).height * (Math.ceil(this.items.length/this.options.numberWide));\r\n        break;\r\n      case 'horizontal':\r\n        return this.elementMeasurement(`budgie-flex-item-${this.budgieId}`).width * (Math.ceil(this.items.length/this.options.numberHigh));\r\n        break;\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n  * Will reset the budgie elements scrollProperty if it hits a wrap point.\r\n  * @param {string} scrollDirection - The scroll direction of the given budgie instance.\r\n  *   can be 'scrollTop' or 'scrollLeft'\r\n  * @returns undefined\r\n  * */\r\n  onScroll(scrollDirection) {\r\n    let scrollContainerSize = this.scrollSizeMeasurement();\r\n\r\n    let budgieElement = this.elementMeasurement(`budgie-flex-item-${this.budgieId}`);\r\n    let budgieElementMeasure = Math.floor(this.options.direction === 'horizontal' ? budgieElement.width : budgieElement.height);\r\n\r\n    if((this.parentContainer[scrollDirection] >= scrollContainerSize + budgieElementMeasure)) {\r\n      this.parentContainer[scrollDirection] = budgieElementMeasure;\r\n    } else if((this.parentContainer[scrollDirection] <= 0 )) {\r\n      this.parentContainer[scrollDirection] = scrollContainerSize;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Will return the scroll property ('scrollTop' or 'scrollLeft') of the budgie instance\r\n   * @returns {String} The scroll property ('scrollTop' or 'scrollLeft') of the budgie instance\r\n   */\r\n  scrollProperty() {\r\n    if (this.options.direction === 'vertical') {\r\n      return 'scrollTop';\r\n    } else if (this.options.direction === 'horizontal') {\r\n      return 'scrollLeft';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Controls the scrolling animation when budgie is set to autoscroll\r\n   */\r\n  startAnimation() {\r\n    const fps =  this.options.fps;\r\n\r\n    let scrollDirection = this.scrollProperty();\r\n\r\n    let scrollContainer = this.container.parentElement;\r\n    let currentScroll;\r\n\r\n    let measure = this.elementMeasurement(`budgie-container-${this.budgieId}`);\r\n    let viewMeasure = (this.options.direction === \"horizontal\") ? measure.width : measure.height;\r\n    // This needs to be a whole number, so always round up\r\n    let scrollSpeed = Math.ceil(viewMeasure / this.options.secondsOnPage / fps);\r\n\r\n    // always clear interval to ensure that only one scroller is running\r\n    this.stop();\r\n    if(this.items.length > this.elementsOnScreen()){\r\n\r\n      this.interval = setInterval(() => {\r\n        let scrollDirection = this.scrollProperty()\r\n\r\n        currentScroll = scrollContainer[scrollDirection];\r\n\r\n        this.options.inverted ? (currentScroll += scrollSpeed) : (currentScroll -= scrollSpeed);\r\n\r\n        scrollContainer[scrollDirection] = currentScroll;\r\n      }, 1000/fps);\r\n    } else {\r\n      scrollContainer[scrollDirection] = 0;\r\n    }\r\n  }\r\n\r\n  //////////////\r\n  // Public methods for using the scroller\r\n  //////////////\r\n  // start the infinite scroll\r\n  start() {\r\n    if(this.isNew){\r\n      this.setupContainer();\r\n      this.insertItems();\r\n      this.prependExtraItems();\r\n      this.appendExtraItems();\r\n      this.setupScrollProperties();\r\n    }\r\n    if(this.options.autoScroll){\r\n      this.startAnimation();\r\n    }\r\n    this.isNew = false;\r\n  }\r\n\r\n  // stop the infinite scroll\r\n  stop() {\r\n    if(!this.interval) return false;\r\n    window.clearInterval(this.interval);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n  remove() {\r\n    this.stop();\r\n    this.container.parentElement.classList.remove(`budgie-flex-container-parent-${this.budgieId}`);\r\n    this.container.parentElement.removeChild(this.container);\r\n  }\r\n\r\n  /*\r\n  * Changes the inversion of the budgie instance.\r\n  * */\r\n  changeInversion(){\r\n    this.options.inverted = !this.options.inverted;\r\n  }\r\n}\r\n\r\nif( typeof global !== 'undefined')\r\n  global.Budgie = Budgie;\r\n"]}